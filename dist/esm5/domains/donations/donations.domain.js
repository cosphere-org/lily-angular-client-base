/**
  * THIS FILE WAS AUTOGENERATED, ALL MANUAL CHANGES CAN BE
  * OVERWRITTEN
  */
/**
 * Donations Management Domain
 */
import { Injectable } from '@angular/core';
import { filter } from 'rxjs/operators';
import * as _ from 'underscore';
import { ClientService } from '../../services/client.service';
var DonationsDomain = /** @class */ (function () {
    function DonationsDomain(client) {
        this.client = client;
    }
    /**
     * Check if one can attempt a request displaying donation
     * -------------
     *
     * Since we don't want to overflow user with unnecessary requests for him donating we do it in a smarter way using set of heuristics that together help us to answer the following question: "Is it the best moment to ask for the donation?". Currently we use the following heuristics: - is account old enough? - whether user recently donated - whether we attempted recently to request donation from the user - if the user in a good mood (after doing some successful recalls)
     */
    DonationsDomain.prototype.checkIfCanAttemptDonation = function (params) {
        return this.client.getDataState('/payments/donations/can_attempt/', { params: params, authorizationRequired: true });
    };
    DonationsDomain.prototype.checkIfCanAttemptDonation2 = function (params) {
        return this.client.get('/payments/donations/can_attempt/', { params: params, authorizationRequired: true });
    };
    /**
     * Register anonymous donation
     * -------------
     *
     * One can perform a donation payment even if not being an authenticated user. Even in that case we cannot allow full anonymity and we must require at least email address to send information regarding the status of the payment.
     */
    DonationsDomain.prototype.createAnonymousDonation = function (body) {
        return this.client
            .post('/payments/donations/register_anonymous/', body, { authorizationRequired: false })
            .pipe(filter(function (x) { return !_.isEmpty(x); }));
    };
    /**
     * Register donation from authenticated user
     * -------------
     *
     * One can perform a donation payment even as an authenticated user.
     */
    DonationsDomain.prototype.createDonation = function (body) {
        return this.client
            .post('/payments/donations/register/', body, { authorizationRequired: true })
            .pipe(filter(function (x) { return !_.isEmpty(x); }));
    };
    /**
     * Create donation attempt for authenticated user
     * -------------
     *
     * Each Donation Attempt should be followed by creation of Donation Attempt model instance to reflect that fact. It allows one to track how many times we asked a certain user about the donation in order not to overflow that user with them and not to be too aggressive.
     */
    DonationsDomain.prototype.createDonationattempt = function (body) {
        return this.client
            .post('/payments/donations/attempts/', body, { authorizationRequired: true })
            .pipe(filter(function (x) { return !_.isEmpty(x); }));
    };
    DonationsDomain.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    DonationsDomain.ctorParameters = function () { return [
        { type: ClientService }
    ]; };
    return DonationsDomain;
}());
export { DonationsDomain };

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9uYXRpb25zLmRvbWFpbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bjb3NwaGVyZS9jbGllbnQvIiwic291cmNlcyI6WyJkb21haW5zL2RvbmF0aW9ucy9kb25hdGlvbnMuZG9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7SUFHSTtBQUVKOztHQUVHO0FBQ0gsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEMsT0FBTyxLQUFLLENBQUMsTUFBTSxZQUFZLENBQUM7QUFFaEMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBSzlEO0lBRUkseUJBQW9CLE1BQXFCO1FBQXJCLFdBQU0sR0FBTixNQUFNLENBQWU7SUFBRyxDQUFDO0lBRTdDOzs7OztPQUtHO0lBQ0ksbURBQXlCLEdBQWhDLFVBQWlDLE1BQXdDO1FBQ3JFLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBc0Msa0NBQWtDLEVBQUUsRUFBRSxNQUFNLFFBQUEsRUFBRSxxQkFBcUIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3RKLENBQUM7SUFFTSxvREFBMEIsR0FBakMsVUFBa0MsTUFBd0M7UUFDdEUsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFzQyxrQ0FBa0MsRUFBRSxFQUFFLE1BQU0sUUFBQSxFQUFFLHFCQUFxQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDN0ksQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksaURBQXVCLEdBQTlCLFVBQStCLElBQW1DO1FBQzlELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTTthQUNiLElBQUksQ0FBb0MseUNBQXlDLEVBQUUsSUFBSSxFQUFFLEVBQUUscUJBQXFCLEVBQUUsS0FBSyxFQUFFLENBQUM7YUFDMUgsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBYixDQUFhLENBQUMsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLHdDQUFjLEdBQXJCLFVBQXNCLElBQTBCO1FBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTTthQUNiLElBQUksQ0FBMkIsK0JBQStCLEVBQUUsSUFBSSxFQUFFLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxFQUFFLENBQUM7YUFDdEcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBYixDQUFhLENBQUMsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLCtDQUFxQixHQUE1QixVQUE2QixJQUFpQztRQUMxRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU07YUFDYixJQUFJLENBQWtDLCtCQUErQixFQUFFLElBQUksRUFBRSxFQUFFLHFCQUFxQixFQUFFLElBQUksRUFBRSxDQUFDO2FBQzdHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQWIsQ0FBYSxDQUFDLENBQUMsQ0FBQztJQUMxQyxDQUFDOztnQkFwREosVUFBVTs7OztnQkFMRixhQUFhOztJQTJEdEIsc0JBQUM7Q0FBQSxBQXRERCxJQXNEQztTQXJEWSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gICogVEhJUyBGSUxFIFdBUyBBVVRPR0VORVJBVEVELCBBTEwgTUFOVUFMIENIQU5HRVMgQ0FOIEJFXG4gICogT1ZFUldSSVRURU5cbiAgKi9cblxuLyoqXG4gKiBEb25hdGlvbnMgTWFuYWdlbWVudCBEb21haW5cbiAqL1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0ICogYXMgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHsgQ2xpZW50U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2NsaWVudC5zZXJ2aWNlJztcbmltcG9ydCB7IERhdGFTdGF0ZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2NsaWVudC5pbnRlcmZhY2UnO1xuXG5pbXBvcnQgKiBhcyBYIGZyb20gJy4vZG9uYXRpb25zLm1vZGVscyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBEb25hdGlvbnNEb21haW4ge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2xpZW50OiBDbGllbnRTZXJ2aWNlKSB7fVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgb25lIGNhbiBhdHRlbXB0IGEgcmVxdWVzdCBkaXNwbGF5aW5nIGRvbmF0aW9uXG4gICAgICogLS0tLS0tLS0tLS0tLVxuICAgICAqXG4gICAgICogU2luY2Ugd2UgZG9uJ3Qgd2FudCB0byBvdmVyZmxvdyB1c2VyIHdpdGggdW5uZWNlc3NhcnkgcmVxdWVzdHMgZm9yIGhpbSBkb25hdGluZyB3ZSBkbyBpdCBpbiBhIHNtYXJ0ZXIgd2F5IHVzaW5nIHNldCBvZiBoZXVyaXN0aWNzIHRoYXQgdG9nZXRoZXIgaGVscCB1cyB0byBhbnN3ZXIgdGhlIGZvbGxvd2luZyBxdWVzdGlvbjogXCJJcyBpdCB0aGUgYmVzdCBtb21lbnQgdG8gYXNrIGZvciB0aGUgZG9uYXRpb24/XCIuIEN1cnJlbnRseSB3ZSB1c2UgdGhlIGZvbGxvd2luZyBoZXVyaXN0aWNzOiAtIGlzIGFjY291bnQgb2xkIGVub3VnaD8gLSB3aGV0aGVyIHVzZXIgcmVjZW50bHkgZG9uYXRlZCAtIHdoZXRoZXIgd2UgYXR0ZW1wdGVkIHJlY2VudGx5IHRvIHJlcXVlc3QgZG9uYXRpb24gZnJvbSB0aGUgdXNlciAtIGlmIHRoZSB1c2VyIGluIGEgZ29vZCBtb29kIChhZnRlciBkb2luZyBzb21lIHN1Y2Nlc3NmdWwgcmVjYWxscylcbiAgICAgKi9cbiAgICBwdWJsaWMgY2hlY2tJZkNhbkF0dGVtcHREb25hdGlvbihwYXJhbXM6IFguQ2hlY2tJZkNhbkF0dGVtcHREb25hdGlvblF1ZXJ5KTogRGF0YVN0YXRlPFguQ2hlY2tJZkNhbkF0dGVtcHREb25hdGlvblJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudC5nZXREYXRhU3RhdGU8WC5DaGVja0lmQ2FuQXR0ZW1wdERvbmF0aW9uUmVzcG9uc2U+KCcvcGF5bWVudHMvZG9uYXRpb25zL2Nhbl9hdHRlbXB0LycsIHsgcGFyYW1zLCBhdXRob3JpemF0aW9uUmVxdWlyZWQ6IHRydWUgfSk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBjaGVja0lmQ2FuQXR0ZW1wdERvbmF0aW9uMihwYXJhbXM6IFguQ2hlY2tJZkNhbkF0dGVtcHREb25hdGlvblF1ZXJ5KTogT2JzZXJ2YWJsZTxYLkNoZWNrSWZDYW5BdHRlbXB0RG9uYXRpb25SZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuZ2V0PFguQ2hlY2tJZkNhbkF0dGVtcHREb25hdGlvblJlc3BvbnNlPignL3BheW1lbnRzL2RvbmF0aW9ucy9jYW5fYXR0ZW1wdC8nLCB7IHBhcmFtcywgYXV0aG9yaXphdGlvblJlcXVpcmVkOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGFub255bW91cyBkb25hdGlvblxuICAgICAqIC0tLS0tLS0tLS0tLS1cbiAgICAgKlxuICAgICAqIE9uZSBjYW4gcGVyZm9ybSBhIGRvbmF0aW9uIHBheW1lbnQgZXZlbiBpZiBub3QgYmVpbmcgYW4gYXV0aGVudGljYXRlZCB1c2VyLiBFdmVuIGluIHRoYXQgY2FzZSB3ZSBjYW5ub3QgYWxsb3cgZnVsbCBhbm9ueW1pdHkgYW5kIHdlIG11c3QgcmVxdWlyZSBhdCBsZWFzdCBlbWFpbCBhZGRyZXNzIHRvIHNlbmQgaW5mb3JtYXRpb24gcmVnYXJkaW5nIHRoZSBzdGF0dXMgb2YgdGhlIHBheW1lbnQuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZUFub255bW91c0RvbmF0aW9uKGJvZHk6IFguQ3JlYXRlQW5vbnltb3VzRG9uYXRpb25Cb2R5KTogT2JzZXJ2YWJsZTxYLkNyZWF0ZUFub255bW91c0RvbmF0aW9uUmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50XG4gICAgICAgICAgICAucG9zdDxYLkNyZWF0ZUFub255bW91c0RvbmF0aW9uUmVzcG9uc2U+KCcvcGF5bWVudHMvZG9uYXRpb25zL3JlZ2lzdGVyX2Fub255bW91cy8nLCBib2R5LCB7IGF1dGhvcml6YXRpb25SZXF1aXJlZDogZmFsc2UgfSlcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcih4ID0+ICFfLmlzRW1wdHkoeCkpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBkb25hdGlvbiBmcm9tIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgICAqIC0tLS0tLS0tLS0tLS1cbiAgICAgKlxuICAgICAqIE9uZSBjYW4gcGVyZm9ybSBhIGRvbmF0aW9uIHBheW1lbnQgZXZlbiBhcyBhbiBhdXRoZW50aWNhdGVkIHVzZXIuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZURvbmF0aW9uKGJvZHk6IFguQ3JlYXRlRG9uYXRpb25Cb2R5KTogT2JzZXJ2YWJsZTxYLkNyZWF0ZURvbmF0aW9uUmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50XG4gICAgICAgICAgICAucG9zdDxYLkNyZWF0ZURvbmF0aW9uUmVzcG9uc2U+KCcvcGF5bWVudHMvZG9uYXRpb25zL3JlZ2lzdGVyLycsIGJvZHksIHsgYXV0aG9yaXphdGlvblJlcXVpcmVkOiB0cnVlIH0pXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoeCA9PiAhXy5pc0VtcHR5KHgpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGRvbmF0aW9uIGF0dGVtcHQgZm9yIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgICAqIC0tLS0tLS0tLS0tLS1cbiAgICAgKlxuICAgICAqIEVhY2ggRG9uYXRpb24gQXR0ZW1wdCBzaG91bGQgYmUgZm9sbG93ZWQgYnkgY3JlYXRpb24gb2YgRG9uYXRpb24gQXR0ZW1wdCBtb2RlbCBpbnN0YW5jZSB0byByZWZsZWN0IHRoYXQgZmFjdC4gSXQgYWxsb3dzIG9uZSB0byB0cmFjayBob3cgbWFueSB0aW1lcyB3ZSBhc2tlZCBhIGNlcnRhaW4gdXNlciBhYm91dCB0aGUgZG9uYXRpb24gaW4gb3JkZXIgbm90IHRvIG92ZXJmbG93IHRoYXQgdXNlciB3aXRoIHRoZW0gYW5kIG5vdCB0byBiZSB0b28gYWdncmVzc2l2ZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlRG9uYXRpb25hdHRlbXB0KGJvZHk6IFguQ3JlYXRlRG9uYXRpb25hdHRlbXB0Qm9keSk6IE9ic2VydmFibGU8WC5DcmVhdGVEb25hdGlvbmF0dGVtcHRSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnRcbiAgICAgICAgICAgIC5wb3N0PFguQ3JlYXRlRG9uYXRpb25hdHRlbXB0UmVzcG9uc2U+KCcvcGF5bWVudHMvZG9uYXRpb25zL2F0dGVtcHRzLycsIGJvZHksIHsgYXV0aG9yaXphdGlvblJlcXVpcmVkOiB0cnVlIH0pXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoeCA9PiAhXy5pc0VtcHR5KHgpKSk7XG4gICAgfVxuXG59Il19